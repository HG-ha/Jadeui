<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialog & Notification Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #eee;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        h1 {
            text-align: center;
            font-weight: 300;
            font-size: 1.8rem;
            margin-bottom: 8px;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            text-align: center;
            opacity: 0.5;
            font-size: 0.85rem;
            margin-bottom: 30px;
        }

        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .section h2 {
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 14px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .row:last-child {
            margin-bottom: 0;
        }

        .label {
            width: 80px;
            font-size: 0.8rem;
            opacity: 0.6;
            display: flex;
            align-items: center;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            flex: 1;
        }

        button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }

        .btn-frontend {
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .btn-backend {
            background: linear-gradient(90deg, #11998e, #38ef7d);
        }

        .btn-frontend:hover, .btn-backend:hover {
            opacity: 0.9;
        }

        .tag {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: auto;
        }

        .tag-frontend {
            background: rgba(102, 126, 234, 0.3);
            color: #a5b4fc;
        }

        .tag-backend {
            background: rgba(56, 239, 125, 0.2);
            color: #6ee7b7;
        }

        .hint {
            font-size: 0.75rem;
            opacity: 0.4;
            margin-top: 10px;
        }

        #result {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
            font-family: monospace;
            font-size: 0.8rem;
            min-height: 60px;
            white-space: pre-wrap;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ Dialog & Notification</h1>
        <p class="subtitle">JadeView 1.3.0+ å¯¹è¯æ¡†ä¸é€šçŸ¥ API æ¼”ç¤º</p>

        <!-- æ–‡ä»¶å¯¹è¯æ¡† -->
        <div class="section">
            <h2>ğŸ“ æ–‡ä»¶å¯¹è¯æ¡† <span class="tag tag-frontend">å‰ç«¯ jade.dialog</span> <span class="tag tag-backend">åç«¯ Dialog</span></h2>
            <div class="row">
                <span class="label">ğŸŒ å‰ç«¯</span>
                <div class="btn-group">
                    <button class="btn-frontend" onclick="openFileFrontend()">æ‰“å¼€æ–‡ä»¶</button>
                    <button class="btn-frontend" onclick="saveFileFrontend()">ä¿å­˜æ–‡ä»¶</button>
                </div>
            </div>
            <div class="row">
                <span class="label">ğŸ åç«¯</span>
                <div class="btn-group">
                    <button class="btn-backend" onclick="jade.invoke('openFile')">æ‰“å¼€æ–‡ä»¶</button>
                    <button class="btn-backend" onclick="jade.invoke('saveFile')">ä¿å­˜æ–‡ä»¶</button>
                </div>
            </div>
        </div>

        <!-- æ¶ˆæ¯æ¡† -->
        <div class="section">
            <h2>ğŸ’¬ æ¶ˆæ¯æ¡† <span class="tag tag-frontend">å‰ç«¯</span> <span class="tag tag-backend">åç«¯</span></h2>
            <div class="row">
                <span class="label">ğŸŒ å‰ç«¯</span>
                <div class="btn-group">
                    <button class="btn-frontend" onclick="showMessageFrontend('info')">æç¤º</button>
                    <button class="btn-frontend" onclick="showMessageFrontend('confirm')">ç¡®è®¤</button>
                    <button class="btn-frontend" onclick="showMessageFrontend('error')">é”™è¯¯</button>
                </div>
            </div>
            <div class="row">
                <span class="label">ğŸ åç«¯</span>
                <div class="btn-group">
                    <button class="btn-backend" onclick="jade.invoke('showMessage', 'info')">æç¤º</button>
                    <button class="btn-backend" onclick="jade.invoke('showMessage', 'confirm')">ç¡®è®¤</button>
                    <button class="btn-backend" onclick="jade.invoke('showMessage', 'error')">é”™è¯¯</button>
                </div>
            </div>
        </div>

        <!-- æ¡Œé¢é€šçŸ¥ -->
        <div class="section">
            <h2>ğŸ”” æ¡Œé¢é€šçŸ¥ <span class="tag tag-backend">ä»…åç«¯ Notification</span></h2>
            <div class="row">
                <span class="label">ğŸ åç«¯</span>
                <div class="btn-group">
                    <button class="btn-backend" onclick="jade.invoke('notify', 'simple')">ç®€å•é€šçŸ¥</button>
                    <button class="btn-backend" onclick="jade.invoke('notify', 'buttons')">ä¸‹è½½å®Œæˆ</button>
                    <button class="btn-backend" onclick="jade.invoke('notify', 'timeout')">æ–°æ¶ˆæ¯</button>
                </div>
            </div>
            <p class="hint">é€šçŸ¥äº‹ä»¶ä¼šè¾“å‡ºåˆ° Python æ§åˆ¶å°</p>
        </div>

        <!-- ç»“æœæ˜¾ç¤º -->
        <div id="result">ç­‰å¾…æ“ä½œ...</div>
    </div>

    <script>
        function log(msg) {
            document.getElementById('result').textContent = msg;
            console.log(msg);
        }

        // ==================== å‰ç«¯ API ====================

        async function openFileFrontend() {
            try {
                log('è°ƒç”¨ jade.dialog.showOpenDialog...');
                const result = await jade.dialog.showOpenDialog({
                    title: 'é€‰æ‹©æ–‡ä»¶ (å‰ç«¯)',
                    filters: [
                        { name: 'å›¾ç‰‡', extensions: ['png', 'jpg', 'gif'] },
                        { name: 'æ‰€æœ‰æ–‡ä»¶', extensions: ['*'] }
                    ],
                    properties: ['openFile', 'multiSelections']
                });
                log('å‰ç«¯æ‰“å¼€æ–‡ä»¶ç»“æœ:\n' + JSON.stringify(result, null, 2));
            } catch (e) {
                log('é”™è¯¯: ' + e.message);
            }
        }

        async function saveFileFrontend() {
            try {
                log('è°ƒç”¨ jade.dialog.showSaveDialog...');
                const result = await jade.dialog.showSaveDialog({
                    title: 'ä¿å­˜æ–‡ä»¶ (å‰ç«¯)',
                    defaultPath: 'untitled.txt',
                    filters: [
                        { name: 'æ–‡æœ¬æ–‡ä»¶', extensions: ['txt'] },
                        { name: 'æ‰€æœ‰æ–‡ä»¶', extensions: ['*'] }
                    ]
                });
                log('å‰ç«¯ä¿å­˜æ–‡ä»¶ç»“æœ:\n' + JSON.stringify(result, null, 2));
            } catch (e) {
                log('é”™è¯¯: ' + e.message);
            }
        }

        async function showMessageFrontend(type) {
            try {
                let options = {};
                if (type === 'info') {
                    options = {
                        title: 'æç¤º (å‰ç«¯)',
                        message: 'è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æç¤º',
                        type: 'info',
                        buttons: ['ç¡®å®š']
                    };
                } else if (type === 'confirm') {
                    options = {
                        title: 'ç¡®è®¤ (å‰ç«¯)',
                        message: 'ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ',
                        type: 'question',
                        buttons: ['ç¡®å®š', 'å–æ¶ˆ']
                    };
                } else if (type === 'error') {
                    options = {
                        title: 'é”™è¯¯ (å‰ç«¯)',
                        message: 'å‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯ï¼',
                        type: 'error',
                        buttons: ['ç¡®å®š']
                    };
                }
                
                log('è°ƒç”¨ jade.dialog.showMessageBox...');
                const result = await jade.dialog.showMessageBox(options);
                log('å‰ç«¯æ¶ˆæ¯æ¡†ç»“æœ:\n' + JSON.stringify(result, null, 2));
            } catch (e) {
                log('é”™è¯¯: ' + e.message);
            }
        }
    </script>
</body>
</html>
